# 骆言标准库

骆言编程语言的标准库提供了常用的编程功能，旨在简化AI助手和开发者的日常编程任务。

## 模块概览

### 基础模块 (基础.luoyan)
提供函数式编程的基础工具：
- `身份函数`: 返回传入的值
- `常量函数`: 创建常量函数
- `组合函数`: 函数组合
- `应用函数`: 函数应用
- `翻转参数`: 参数顺序翻转

**示例**:
```luoyan
导入 基础: [身份函数, 组合函数];
让 结果 = 身份函数 42; (* 返回 42 *)
让 加1乘2 = 组合函数 (函数 x -> x * 2) (函数 x -> x + 1);
```

### 数学模块 (数学.luoyan)
提供数学运算和常用数学函数：
- `阶乘`: 计算阶乘
- `幂运算`: 幂次运算
- `最大公约数`, `最小公倍数`: 数论函数
- `最大值`, `最小值`, `绝对值`: 比较和转换
- `斐波那契`: 斐波那契数列
- `素数判断`, `下个素数`: 素数相关
- `圆周率`, `自然对数底`: 数学常量

**示例**:
```luoyan
导入 数学: [阶乘, 斐波那契, 素数判断];
让 fact5 = 阶乘 5; (* 120 *)
让 fib8 = 斐波那契 8; (* 21 *)
让 是素数 = 素数判断 17; (* 真 *)
```

### 列表模块 (列表.luoyan)
提供列表操作和函数式编程工具：

**基本操作**:
- `长度`, `是否为空`, `头部`, `尾部`
- `连接`, `反转`

**高阶函数**:
- `映射`: 将函数应用到列表每个元素
- `过滤`: 根据条件过滤列表
- `折叠左`, `折叠右`: 列表归约
- `查找`: 查找满足条件的元素

**列表构造**:
- `范围`: 生成数字范围
- `重复`: 重复元素
- `取前n个`, `跳过n个`: 列表分割

**排序和搜索**:
- `排序`, `包含`, `索引`: 排序和查找

**示例**:
```luoyan
导入 列表: [映射, 过滤, 范围, 折叠左];
让 数字 = 范围 1 10; (* [1; 2; 3; 4; 5; 6; 7; 8; 9; 10] *)
让 平方 = 映射 (函数 x -> x * x) 数字;
让 偶数 = 过滤 (函数 x -> x % 2 = 0) 数字;
让 求和 = 折叠左 (函数 acc x -> acc + x) 0 数字; (* 55 *)
```

### 字符串模块 (字符串.luoyan)
提供字符串操作和处理功能：

**基本操作**:
- `长度`, `是否为空`, `连接`, `重复`

**查找和匹配**:
- `包含`, `开头匹配`, `结尾匹配`, `查找位置`

**转换操作**:
- `转大写`, `转小写`
- `去除空格`, `去除左空格`, `去除右空格`

**分割和连接**:
- `分割`, `连接列表`

**截取操作**:
- `截取`, `左截取`, `右截取`

**示例**:
```luoyan
导入 字符串: [连接, 重复, 包含];
让 问候 = 连接 "你好" "世界"; (* "你好世界" *)
让 重复问候 = 重复 3 "Hi!"; (* "Hi!Hi!Hi!" *)
让 包含测试 = 包含 "世界" 问候; (* 真 *)
```

## 使用方法

### 1. 导入模块
```luoyan
(* 导入单个函数 *)
导入 数学: [阶乘, 斐波那契];

(* 导入多个模块 *)
导入 列表: [映射, 过滤];
导入 字符串: [连接];
```

### 2. 组合使用
```luoyan
导入 数学: [阶乘];
导入 列表: [映射, 范围];

(* 计算1到5的阶乘列表 *)
让 阶乘列表 = 映射 阶乘 (范围 1 5);
(* 结果: [1; 2; 6; 24; 120] *)
```

### 3. 函数式编程
```luoyan
导入 基础: [组合函数];
导入 列表: [映射, 过滤];

(* 创建数据处理管道 *)
让 处理数据 = 函数 数据 ->
  数据
  |> 映射 (函数 x -> x * 2)
  |> 过滤 (函数 x -> x > 10)
  |> 映射 (函数 x -> x + 1);
```

## 实现状态

### ✅ 已实现
- 基础模块基本功能
- 数学模块核心函数
- 列表模块主要操作
- 字符串模块基础功能

### 🚧 正在实现
- 字符串模块的底层字符操作
- 数组模块
- IO模块
- 错误处理模块

### 📋 计划中
- 并发模块
- 网络模块
- 文件系统模块
- 正则表达式模块

## 性能考虑

标准库的实现注重性能和内存效率：
- 尾递归优化用于避免栈溢出
- 惰性求值用于处理大数据集
- 内存高效的数据结构

## 测试

标准库包含全面的测试套件：
```bash
# 运行标准库测试
dune runtest test/test_stdlib_comprehensive.ml
```

## 贡献

欢迎为标准库贡献代码：
1. 遵循中文命名规范
2. 提供完整的测试覆盖
3. 添加中文文档和示例
4. 考虑AI友好的API设计

## 设计哲学

骆言标准库的设计遵循以下原则：
- **AI友好**: 直观的中文命名，清晰的错误信息
- **函数式**: 优先使用纯函数，减少副作用
- **组合性**: 小而美的函数，便于组合使用
- **一致性**: 统一的命名风格和API设计
- **性能**: 在保持简洁的同时确保性能

## 许可证

本标准库遵循与骆言编译器相同的许可证。