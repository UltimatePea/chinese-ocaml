(** 骆言内置函数模块接口 - Chinese Programming Language Builtin Functions Module Interface

    这个模块定义了骆言编程语言的所有内置函数，提供语言的基础功能和系统接口。 内置函数是语言运行时环境的重要组成部分，覆盖了数学运算、字符串处理、 输入输出、数据结构操作等核心功能。

    该模块的主要职责包括：
    - 定义和维护所有内置函数的实现
    - 提供内置函数的查找和调用接口
    - 管理内置函数的命名空间和参数验证
    - 支持内置函数的动态发现和枚举

    内置函数分为以下几个类别：
    - 数学函数：基本运算、三角函数、对数函数等
    - 字符串函数：字符串处理、格式化、转换等
    - 输入输出函数：文件操作、控制台输入输出等
    - 数据结构函数：列表、数组、字典操作等
    - 系统函数：时间、环境变量、进程控制等

    @author 骆言项目组
    @since 0.1.0 *)

open Value_operations

type builtin_function_table = (string * runtime_value) list
(** 内置函数表类型，存储函数名称和对应的运行时值

    该类型定义了内置函数表的结构，每个元素包含：
    - 函数名称（字符串）：函数在骆言中的标识符
    - 运行时值：函数的具体实现，包装为runtime_value类型

    内置函数表在系统初始化时构建，包含所有可用的内置函数。 *)

val builtin_functions : builtin_function_table
(** 获取完整的内置函数表

    @return 包含所有内置函数的函数表

    该值提供对所有内置函数的统一访问接口。函数表在模块加载时初始化， 包含了语言支持的所有内置功能。每个函数都以 (函数名, 函数值) 的形式存储。

    函数表中的函数按功能分类组织，常见的内置函数包括：
    - 数学函数：加、减、乘、除、求模、绝对值、平方根等
    - 字符串函数：连接、分割、替换、查找、长度计算等
    - 列表函数：添加、删除、查找、排序、过滤、映射等
    - 输入输出函数：打印、读取、文件操作等
    - 类型转换函数：整数转字符串、字符串转整数等 *)

val call_builtin_function : string -> runtime_value list -> runtime_value
(** 调用指定的内置函数

    @param func_name 要调用的内置函数名称
    @param args 传递给函数的参数列表
    @return 函数执行的结果值

    该函数是内置函数调用的核心接口，执行流程如下： 1. 根据函数名称查找对应的内置函数实现 2. 验证参数数量和类型是否符合函数签名 3. 调用函数实现并传递参数 4. 返回函数执行结果

    支持的参数类型包括所有runtime_value类型：
    - 基本类型：整数、浮点数、字符串、布尔值
    - 复合类型：列表、元组、记录、对象等
    - 函数类型：高阶函数参数传递

    @raise RuntimeError 当函数名称不存在时
    @raise TypeError 当参数类型不匹配时
    @raise ArityError 当参数数量不正确时 *)

val is_builtin_function : string -> bool
(** 检查指定名称是否为内置函数

    @param func_name 要检查的函数名称
    @return 布尔值，true表示是内置函数，false表示不是

    该函数用于运行时的函数名称解析，帮助区分用户定义函数和内置函数。 在函数调用过程中，解释器会先检查函数是否为内置函数，然后决定调用路径。

    检查过程： 1. 在内置函数表中查找指定名称 2. 返回查找结果（存在/不存在）

    该函数常用于：
    - 词法分析阶段的关键字识别
    - 语法分析阶段的函数调用解析
    - 运行时的函数分发决策 *)

val get_builtin_function_names : unit -> string list
(** 获取所有内置函数名称列表

    @return 字符串列表，包含所有内置函数的名称

    该函数提供内置函数的枚举功能，返回所有可用内置函数的名称。 函数名称按字母顺序排序，便于查找和浏览。

    主要用途：
    - 开发工具的自动补全功能
    - 文档生成和帮助系统
    - 调试和诊断工具
    - 语言特性的动态发现

    返回的列表包含所有类别的内置函数名称，包括但不限于：
    - 数学函数：abs, sqrt, sin, cos, log, exp 等
    - 字符串函数：concat, split, replace, find, length 等
    - 列表函数：append, head, tail, map, filter, fold 等
    - 输入输出函数：print, println, read, write 等 *)
