# 诗词模块整合重构设计文档

## 背景
当前 `src/poetry/` 目录存在严重的过度模块化问题，包含140+个独立模块文件，功能重叠严重，维护成本高。

## 现状分析
- 韵律相关模块：26个，功能重复
- 艺术评估模块：9个，职责不清
- 数据加载模块：30+个，接口混乱
- 总计模块数：140+个

## 重构目标
将poetry目录模块数量从140+个减少到15个以内的核心模块。

## 重构阶段

### Phase 1: 核心模块创建
创建统一的核心模块框架：
1. `poetry_rhyme_core.ml` - 韵律核心功能
2. `poetry_rhyme_data.ml` - 韵律数据管理  
3. `poetry_artistic_core.ml` - 艺术评估核心

### Phase 2: 功能迁移
逐步将现有模块功能迁移到核心模块中。

### Phase 3: 依赖更新
更新其他模块对poetry模块的依赖引用。

### Phase 4: 清理旧模块
删除已整合的旧模块文件。

## 实施原则
1. 保持向后兼容性
2. 确保测试通过
3. 保留所有功能，只重组结构
4. 渐进式重构，避免大爆炸式更改

## 当前进度
- [x] 创建设计文档
- [ ] Phase 1: 核心模块创建
- [ ] Phase 2: 功能迁移
- [ ] Phase 3: 依赖更新  
- [ ] Phase 4: 清理旧模块

## 风险评估
- 模块依赖关系复杂，需要仔细处理
- 测试覆盖需要保持
- 可能需要多个小PR而不是一个大PR

## 相关Issue
#1058 - 技术债务改进：诗词模块过度细分整合优化 Phase 5.1