# 引用标识符语法设计 (RFC 0001)

## 概述

本RFC探讨实现引用标识符语法的可行性，响应GitHub issue #28的建议。

## 背景

当前骆言编译器在处理中文关键字和标识符的边界识别时遇到挑战：
- "作为"被错误分割为"作" + "为" 
- "设wenyan"被识别为单个标识符而非关键字 + 标识符
- "名曰"被分割为"名" + "曰"

## 提议的解决方案

### 核心理念

按照issue #28的建议：
1. **所有用户定义的标识符必须用「」包装**
2. **不在「」中的词语都被视为编译器指令（关键字）**
3. **「」作为准引用，区分对象级别和元级别**

### 语法示例

#### 当前语法 vs 新语法

```ocaml
(* 当前语法 *)
让 年龄 = 25
让 姓名 = "张三"
函数 计算年龄 参数 = 参数 + 1

(* 新语法 *)
让「年龄」= 25
让「姓名」= "张三"  
函数「计算年龄」「参数」=「参数」+ 1
```

#### wenyan风格语法

```ocaml
(* 当前 *)
设数值为42

(* 新语法 *)
设「数值」为 42
```

### 实现优势

1. **完全消除歧义**：关键字和标识符有明确的视觉区分
2. **简化词法分析**：无需复杂的边界检查算法
3. **提高可读性**：中文代码中的变量名更加突出
4. **支持任意标识符**：可以包含空格、标点等

### 实现计划

#### 阶段1：词法分析器扩展
- 添加「」token识别
- 实现引用标识符解析
- 保持向后兼容

#### 阶段2：语法分析器修改
- 更新所有标识符解析规则
- 支持新的语法形式

#### 阶段3：渐进迁移
- 同时支持旧语法和新语法
- 提供迁移工具

### 潜在挑战

1. **向后兼容性**：需要保持现有代码可运行
2. **输入便利性**：「」字符输入可能不便
3. **语法冗余**：可能增加代码长度
4. **学习曲线**：用户需要适应新语法

## 决策点

1. 是否完全采用新语法？
2. 如何处理向后兼容？
3. 是否提供简化的输入方法？

## 下一步

1. 创建原型实现
2. 收集社区反馈
3. 评估迁移成本