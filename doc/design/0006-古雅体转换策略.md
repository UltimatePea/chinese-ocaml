# 古雅体转换策略

## 概述

基于GitHub Issues #45和#46的要求，需要将项目中所有.ly文件转换为古雅体（古典雅致）语法风格。

## 转换规则

### 函数定义转换
```
现代语法：让 函数名 = 函数 参数 -> 函数体
古雅体：夫 函数名 者 受 参数 焉 算法 乃 函数体 是谓
```

### 变量声明转换
```
现代语法：让 变量名 = 值
古雅体：设 变量名 为 值
```

### 模式匹配转换
```
现代语法：
匹配 表达式 与
| 模式1 -> 结果1
| 模式2 -> 结果2

古雅体：
观 表达式 之 性
若 模式1 则 答 结果1
若 模式2 则 答 结果2
观毕
```

### 条件判断转换
```
现代语法：如果 条件 那么 结果1 否则 结果2
古雅体：若 条件 则 答 结果1 余者 答 结果2
```

## 转换优先级

1. **标准库文件** - 已部分完成
2. **示例文件** - 已部分完成
3. **测试文件** - 进行中
4. **性能测试文件**
5. **骆言编译器源码文件**
6. **自举文件**

## 实施状态

### 已完成
- 示例/hello.ly
- 示例/factorial.ly
- 示例/fibonacci.ly
- 标准库/基础.ly
- 标准库/数学.ly
- 标准库/列表.ly（部分）
- test/test_files/pattern_matching.ly
- test/test_files/nested_functions.ly

### 进行中
- 标准库/列表.ly（剩余函数）
- 标准库/字符串.ly
- 标准库/输入输出.ly

### 待完成
- 59个文件仍包含现代语法（通过grep检索确认）

## 技术注意事项

1. **构建验证**：每次转换后运行`dune build`确保语法正确
2. **测试验证**：定期运行测试套件确保功能完整性
3. **提交策略**：按功能模块分批提交，便于问题回溯
4. **语法一致性**：确保整个项目使用统一的古雅体语法规范

## 下一步计划

1. 完成标准库文件转换
2. 批量处理测试文件
3. 处理性能测试文件
4. 最后处理编译器源码和自举文件