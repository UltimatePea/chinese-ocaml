# 技术债务改进：诗词数据硬编码外化重构 - expanded_data_loader.ml优化

## 问题描述

在技术债务分析中发现，`src/poetry/data/expanded_data_loader.ml`文件（400行）包含大量硬编码的诗词词汇数据，存在明显的技术债务问题，需要进行数据外化重构。

## 🎯 技术债务分析

### 当前状况
- **文件大小**: 400行代码
- **硬编码数据**: 大量词汇列表直接硬编码在OCaml代码中
- **维护难度**: 数据和逻辑混合，不便于词汇扩展和维护
- **诗词美学**: 影响诗词编程特性的优雅性和可扩展性

### 主要问题
1. **数据与逻辑混合**: 词汇数据硬编码在源代码中
2. **扩展困难**: 新增词汇需要修改源代码和重新编译
3. **版本控制污染**: 词汇更新会产生大量代码diff
4. **诗词艺术性约束**: 限制了诗词创作的词汇丰富性

## 🔧 重构方案

### A. 数据外化迁移
将硬编码词汇数据迁移到JSON配置文件：
- `data/poetry/expanded_word_classes.json` - 词性扩展数据
- `data/poetry/artistic_vocabulary.json` - 艺术词汇库
- `data/poetry/classical_terms.json` - 古典用词数据

### B. 诗词编程艺术性提升
1. **词汇分级系统**: 按诗词雅俗程度分类
2. **意境关联**: 建立词汇与意境的映射关系
3. **音韵优化**: 完善声韵和谐的词汇选择

## 📈 预期收益

- **代码行数**: 从400行减少到约150行
- **词汇容量**: 可扩展至10000+词汇
- **加载性能**: 启动时间减少约30%
- **诗词美学**: 更丰富的词汇支持诗词创作

## 🚀 实施计划

1. **数据分析和设计** (1天)
2. **数据外化实施** (2天)  
3. **诗词美学增强** (1天)
4. **性能优化和测试** (1天)

## 📋 成功标准

- [ ] 硬编码词汇数据100%外化为JSON文件
- [ ] 模块代码减少到150行以内
- [ ] 所有诗词功能测试通过
- [ ] 词汇加载性能提升30%以上
- [ ] 支持用户自定义词汇扩展

## 优先级

**高优先级** - 这是项目中最大的技术债务之一，重构后将显著提升诗词编程特性的可维护性和艺术表现力。

---

**预估工作量**: 4-5天  
**技术复杂度**: 中等  
**业务影响**: 正面（增强诗词编程特性）